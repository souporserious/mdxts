export const metadata = {
  title: 'Rendering',
}

# Rendering Examples

Examples can be rendered in MDX using the [[Example]] and [[Preview]] components. These components take a `source` prop, which is the name of the example file or code block in any of the [locations examples can exist](./01.writing.mdx).

As an illustration of how this works, let's say we have the following file structure:

```
├── examples
│   ├── Basic.tsx
│   └── Advanced.tsx
└── README.mdx
```

We can now render the `basic` example in our README like so:

```mdx
<Example source="Basic.tsx" />
```

## Code Block Examples

When declaring a code block in MDX, you can target the filename prop to render the example:

````mdx
```Basic.tsx
export const Basic = () => <div>Basic</div>
```

<Example source="Basic.tsx" />
````

Or if no source is provided the first previous code block will be used.

````mdx
```tsx
export const Basic = () => <div>Basic</div>
```

<Preview />
````

## Templating

While the [[Example]] component is great for content like a blog and one-off situations. It's not very useful for a library, or automated documentation. For this, you can lean on your specific build tool to handle the templating and query the information available in the collected data.

Using Next.js as an example, we can create a custom component that will render the example based on the name of the example file:

```[example].tsx
import Head from 'next/head'
import * as React from 'react'
import { CompiledComponent } from 'components'
import { getSourceLink } from 'utils'
import { pascalCase } from 'case-anything'
import { allComponents } from '.data/components'

export default function Examples({ component, example }) {
  return (
    <>
      <Head>
        <title>
          {pascalCase(component)} / {example.name}
        </title>
      </Head>
      <div style={{ display: 'flex', alignItems: 'baseline', gap: 8 }}>
        {example.path && (
          <a href={getSourceLink({ path: example.path })}>View Source</a>
        )}
      </div>
      <CompiledComponent codeString={example.compiledCode} />
    </>
  )
}

export async function getStaticPaths() {
  const allExamples = allComponents.flatMap((component) => component.examples)
  return {
    paths: allExamples.map((example) => ({
      params: {
        component: example.parentSlug,
        example: example.slug,
      },
    })),
    fallback: false,
  }
}

export async function getStaticProps(query) {
  const allExamples = allComponents.flatMap((component) => component.examples)
  return {
    props: {
      component: query.params.component,
      example: allExamples.find(
        (example) =>
          example.parentSlug === query.params.component &&
          example.slug === query.params.example
      ),
    },
  }
}
```
